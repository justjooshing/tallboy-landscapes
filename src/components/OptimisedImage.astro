---
import { Image } from "@unpic/astro";

interface Props {
  src: string;
  alt: string;
  className?: string;
  priority?: boolean;
}

const { src, alt, className, priority = false } = Astro.props;

const secureSrc = src.startsWith("//")
  ? `https:${src}`
  : src.startsWith("http://")
    ? src.replace(/^http:\/\//i, "https://")
    : src;
---

<div class="image-wrapper">
  <Image
    src={secureSrc}
    class={className}
    alt={alt}
    priority={priority}
    decoding="async"
  />
</div>

<style>
  .image-wrapper {
    position: relative;
    width: 100%;
    height: 100%;
    img {
      height: 100%;
    }
  }
</style>
